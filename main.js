(()=>{"use strict";var e=document.querySelector(".edit__num"),t=document.querySelector(".edit__date"),r=document.querySelector(".form"),n=document.querySelector(".form__btn-save"),o=document.querySelector(".form__btn-reset"),i=document.querySelector(".assingment__title"),l=document.querySelector(".massage__text"),a=(document.querySelector(".form__btn-save"),document.querySelectorAll(".table__list")),c={inputList:document.querySelector(".edit").querySelectorAll(".edit__input"),inputNum:document.querySelector(".edit").querySelectorAll(".edit__input-num"),inputListDate:document.querySelector(".edit").querySelectorAll(".edit__input-date"),inputDateTo:document.querySelector(".edit").querySelector(".edit__input-date_type_to")},u={headerTable:document.querySelector(".finder__hedder-table")},s={inputList:document.querySelector(".assingment").querySelectorAll(".assingment__input")},m={buttonAdd:document.querySelector(".approach__btn-add"),inputTypeOrbit:document.querySelector(".approach__type-orbit"),listTable:document.querySelector(".approach__list"),headerTable:document.querySelector(".approach__header-table"),selectorTemplate:".elements__list-approach",elementsList:document.querySelector(".approach__list").querySelectorAll(".element")},d={buttonAdd:document.querySelector(".condition__btn-add"),listTable:document.querySelector(".condition__list"),headerTable:document.querySelector(".condition__header-table"),selectorTemplate:".elements__list-ko",elementsList:document.querySelector(".condition__list").querySelectorAll(".element")},b={buttonAdd:document.querySelector(".destroy__btn-add"),listTable:document.querySelector(".destroy__list"),headerTable:document.querySelector(".destroy__header-table"),selectorTemplate:".elements__list-ko",elementsList:document.querySelector(".destroy__list").querySelectorAll(".element")},_={buttonAdd:document.querySelector(".deorbit__btn-add"),listTable:document.querySelector(".deorbit__list"),headerTable:document.querySelector(".deorbit__header-table"),selectorTemplate:".elements__list-ko",elementsList:document.querySelector(".deorbit__list").querySelectorAll(".element")},p={buttonAdd:document.querySelector(".spacecraft__btn-add"),listTable:document.querySelector(".spacecraft__list"),headerTable:document.querySelector(".spacecraft__header-table"),selectorTemplate:".elements__list-ka",elementsList:document.querySelector(".spacecraft__list").querySelectorAll(".element")},f={Id:3338,TaskNum:{Num:1811,TaskEpoch:"2022-10-18T10:51",ShiftBoss:"Ампилова О.�.",TaskDescription:"Задание"},Directive:{CollisionApproach:{Pairs:[{IdPairs:1,FirstObject:{ObjectNumber:21675,NoradNumber:38978,IntDes:"2012-061B",LocalNumber:null},SecondObject:{ObjectNumber:36025,NoradNumber:33749,IntDes:"2009-008A",LocalNumber:null},CollisionApproachEpoch:"2022-10-20T18:15:05.00",OrbiteType:"MOE"}]},BreakUp:{ObjectInfos:[{ObjectNumber:9793,NoradNumber:37951,IntDes:"2011-074B",LocalNumber:null}]},Deorbit:{ObjectInfos:[{ObjectNumber:47463,NoradNumber:37951,IntDes:"2011-074B",LocalNumber:null},{ObjectNumber:43,NoradNumber:37951,IntDes:"2011-074B",LocalNumber:null}]},ConditionKA:{ObjectInfos:[{Name:"KA obj",ObjectNumber:6793,NoradNumber:37951,IntDes:"2011-074B "}]}},Message:"Something"},y=[{Id:3336,TaskNum:{Num:1253,TaskEpoch:"2022-10-18T10:55",ShiftBoss:"Ivanov A.A.",TaskDescription:"Задание"},Directive:{CollisionApproach:{Pairs:[{IdPairs:1,FirstObject:{ObjectNumber:21675,NoradNumber:38978,IntDes:"2012-061B",LocalNumber:null},SecondObject:{ObjectNumber:36025,NoradNumber:33749,IntDes:"2009-008A",LocalNumber:null},CollisionApproachEpoch:"2022-10-20T18:15:05.00",OrbiteType:"MOE"},{IdPairs:2,FirstObject:{ObjectNumber:21675,NoradNumber:38567,IntDes:"2012-061B",LocalNumber:null},SecondObject:{ObjectNumber:36967,NoradNumber:33735,IntDes:"2009-008A",LocalNumber:null},CollisionApproachEpoch:"2022-10-20T19:15:07.00",OrbiteType:"LEO"}]},BreakUp:{ObjectInfos:[{ObjectNumber:9793,NoradNumber:37951,IntDes:"2011-074B",LocalNumber:null}]},ConditionKA:{ObjectInfos:[{Name:"KA obj1",ObjectNumber:8594,NoradNumber:37951,IntDes:"2011-074B "}]}},Message:"Lorem Ipsum Lorem Ipsum Lorem Ipsum"},{Id:3338,TaskNum:{Num:1811,TaskEpoch:"2022-10-18T10:51",ShiftBoss:"Ампилова О.�.",TaskDescription:"Задание"},Directive:{CollisionApproach:{Pairs:[{IdPairs:1,FirstObject:{ObjectNumber:21675,NoradNumber:38978,IntDes:"2012-061B",LocalNumber:null},SecondObject:{ObjectNumber:36025,NoradNumber:33749,IntDes:"2009-008A",LocalNumber:null},CollisionApproachEpoch:"2022-10-20T18:15:05.00",OrbiteType:"MOE"}]},BreakUp:{ObjectInfos:[{ObjectNumber:9793,NoradNumber:37951,IntDes:"2011-074B",LocalNumber:null}]},Deorbit:{ObjectInfos:[{ObjectNumber:47463,NoradNumber:37951,IntDes:"2011-074B",LocalNumber:null},{ObjectNumber:43,NoradNumber:37951,IntDes:"2011-074B",LocalNumber:null}]},ConditionKA:{ObjectInfos:[{Name:"KA obj",ObjectNumber:6793,NoradNumber:37951,IntDes:"2011-074B "}]}},Message:"Something"}];function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===v(o)?o:String(o)),n)}var o}function S(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var N=function(){function e(t,r){var n=t.selectorTemplate,o=t.elementsList,i=t.headerTable;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selectorTemplate=n,this._containerCards=document.querySelector(this.selectorTemplate),this._checkVisibleTableHeader=r,this._elementsList=o,this._headerTable=i}return S(e,[{key:"createCard",value:function(){return this._element=this._getTemplate(),this._listInputs=this._element.querySelectorAll(".item__input"),this._buttonTrash=this._element.querySelector(".element__btn-trash"),this._buttonSave=this._element.querySelector(".element__btn-done"),this._setEventListeners(),this._element}},{key:"_getTemplate",value:function(){return this._containerCards.content.querySelector(".element").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._buttonTrash.addEventListener("click",this.removeButton=function(){e._remove()}),this._buttonSave.addEventListener("click",this.saveButton=function(){return e.save()})}},{key:"_removeEventListeners",value:function(){this._buttonTrash.removeEventListener("click",this.removeButton),this._buttonSave.removeEventListener("click",this.saveButton)}},{key:"save",value:function(){var e=this;this._listInputs.forEach((function(t){t.readOnly?(t.readOnly=!1,e._buttonSave.classList.remove("element__btn-done_type_edit"),t.classList.remove("item__input_type_readonly")):(t.readOnly=!0,e._buttonSave.classList.add("element__btn-done_type_edit"),t.classList.add("item__input_type_readonly"))}))}},{key:"_remove",value:function(){this._removeEventListeners(),this._element.remove(),this._checkVisibleTableHeader()}}]),e}();function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==T(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===T(o)?o:String(o)),n)}var o}var D=function(){function e(t){var r=t.data,n=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=n}var t,r;return t=e,r=[{key:"addItem",value:function(e,t){t.append(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e,section,t._container)}))}}],r&&q(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),O=function(){a.forEach((function(e){A(e)?e.classList.remove("header-table_hidden"):e.classList.add("header-table_hidden")})),document.querySelector(".finder__structure").classList.remove("header-table_hidden")},A=function(e){return!!e.querySelector(".element")},j=function(e){e.reset(),e.querySelectorAll(".element").forEach((function(e){return e.remove()})),O()};function L(e){var t={};return e.forEach((function(e){!function(e){var t;""==e.value&&(e.classList.add("item__input_type_empty"),e.addEventListener("focus",t=function(){e.classList.remove("item__input_type_empty"),e.removeEventListener("focus",t)}))}(e),t[e.name]=e.value})),t}function I(e,t){return e.listTable.querySelectorAll(".element").forEach((function(e){t.push(function(e){return L(e.querySelectorAll(".item__input"))}(e))})),t}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e){var t=[];return t.push(e.TaskNum.Num),t.push(e.TaskNum.TaskEpoch),t.push(e.Directive.CollisionApproach?e.Directive.CollisionApproach.Pairs.length:0),t.push(e.Directive.Condition?e.Directive.Condition.ObjectInfos.length:0),t.push(e.Directive.BreakUp?e.Directive.BreakUp.ObjectInfos.length:0),t.push(e.Directive.Deorbit?e.Directive.Deorbit.ObjectInfos.length:0),t.push(e.Directive.ConditionKA?e.Directive.ConditionKA.ObjectInfos.length:0),t.push(e.Message),t}var g=function(e,t){y.map((function(r){r.TaskNum.Num==e&&t(r)}))};function C(e,t,r){t.forEach((function(t){var n=r(e);n.querySelectorAll(".item__input").forEach((function(e){e.value=t[e.name]})),B(n)}))}function B(e){var t=e.querySelectorAll(".item__input"),r=e.querySelector(".element__btn-done");t.forEach((function(e){e.readOnly=!0,r.classList.add("element__btn-done_type_edit"),e.classList.add("item__input_type_readonly")}))}O(),u.headerTable.classList.add("header-table_hidden"),o.addEventListener("click",(function(){i.textContent="Создание задания:",j(r)}));var w=new D({renderer:function(e,t){var r=function(e){return new N(e,O).createCard()}(e);t.addItem(r,e.listTable)}});function P(e){e.buttonAdd.addEventListener("click",(function(){K(e),O()}))}var K=function(e){var t=e.selectorTemplate,r=e.listTable,n=e.headerTable,o=new N({selectorTemplate:t,listTable:r,headerTable:n},O).createCard();return function(e,t){w.addItem(t,e)}(r,o),o};P(d),P(b),P(_),P(m),P(p);var M={};r.addEventListener("submit",(function(e){if(M={},e.preventDefault(),M.TaskNum=L(s.inputList),M.Directive={},M.Message=l.value,A(d.listTable)){M.Directive.Condition={};var t=M.Directive.Condition.ObjectInfos=[];t=I(d,t)}if(A(b.listTable)){M.Directive.BreakUp={};var o=M.Directive.BreakUp.ObjectInfos=[];o=I(b,o)}if(A(_.listTable)){M.Directive.Deorbit={};var a=M.Directive.Deorbit.ObjectInfos=[];a=I(_,a)}if(A(p.listTable)){M.Directive.ConditionKA={};var c=M.Directive.ConditionKA.ObjectInfos=[];c=I(p,c)}if(A(m.listTable)){M.Directive.CollisionApproach={};var u=M.Directive.CollisionApproach.Pairs=[];document.querySelector(".approach__list").querySelectorAll(".element").forEach((function(e,t){var r={};r.IdPairs=t+1,r.CollisionApproachEpoch=e.querySelector(".item__input_type_time").value,r.OrbiteType=e.querySelector(".item__input_type_orbite").value;var n=e.querySelectorAll(".objects__item"),o=n[0].querySelectorAll(".item__input"),i=n[1].querySelectorAll(".item__input");r.FirstObject=L(o),r.SecondObject=L(i),u.push(r)}))}document.querySelector(".item__input_type_empty")?console.log("not okey"):(n.textContent="Добавить задание",i.textContent="Создание задания:",console.log(M),j(r),console.log("okey"))})),e.addEventListener("submit",(function(t){t.preventDefault(),(M={}).TaskNum=L(c.inputNum),console.log(M),j(e),j(r),U(f)})),t.addEventListener("submit",(function(e){e.preventDefault(),function(e){(e={}).TaskNum=L(c.inputListDate),c.inputDateTo.classList.remove("item__input_type_empty"),console.log(e),j(t),j(r)}(M),function(e,t){var r=[];function n(){var t,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){a=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(a)throw i}}}}(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;r.push(E(o))}}catch(e){n.e(e)}finally{n.f()}}n(),n(),n(),n(),u.headerTable.classList.remove("header-table_hidden"),$(document).ready((function(){$(".finder__table").DataTable({data:r,lengthMenu:[2,5,10]});var e=$(".finder__table").DataTable();$(".finder__table tbody").on("click","tr",(function(){var r=e.row(this).data();g(r[0],t)}))}))}(y,U)}));var U=function(e){if(j(r),function(e,t){e.inputList.forEach((function(e){e.value=t.TaskNum[e.name]}))}(s,e),e.Directive.CollisionApproach){var t=e.Directive.CollisionApproach.Pairs;!function(e,t,r){t.forEach((function(t){var n=r(e),o=n.querySelectorAll(".objects__item");o[0].querySelectorAll(".item__input").forEach((function(e){e.value=t.FirstObject[e.name]})),o[1].querySelectorAll(".item__input").forEach((function(e){e.value=t.SecondObject[e.name]})),n.querySelector(".item__input_type_time").value=t.CollisionApproachEpoch;for(var i=n.querySelector(".item__input_type_orbite").getElementsByTagName("option"),l=0;l<i.length;l++)i[l].value==t.OrbiteType&&(i[l].selected=!0);B(n)}))}(m,t,K),m.listTable.classList.remove("header-table_hidden")}if(e.Directive.Condition){var o=e.Directive.Condition.ObjectInfos;C(d,o,K),d.listTable.classList.remove("header-table_hidden")}if(e.Directive.BreakUp){var a=e.Directive.BreakUp.ObjectInfos;C(b,a,K),b.listTable.classList.remove("header-table_hidden")}if(e.Directive.Deorbit){var c=e.Directive.Deorbit.ObjectInfos;C(_,c,K),_.listTable.classList.remove("header-table_hidden")}if(e.Directive.ConditionKA){var u=e.Directive.ConditionKA.ObjectInfos;C(p,u,K),p.listTable.classList.remove("header-table_hidden")}l.value=e.Message,n.textContent="Изменить задание",i.textContent="Редактирование задания:"}})();
//# sourceMappingURL=main.js.map